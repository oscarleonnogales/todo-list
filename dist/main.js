(()=>{const t="task.lists",e="task.selectedListId";let n=JSON.parse(localStorage.getItem(t))||[],a=localStorage.getItem(e);const l=document.querySelector("[data-lists");l.addEventListener("click",(t=>{"li"===t.target.tagName.toLowerCase()&&(a=t.target.dataset.listId,u())}));const o=document.querySelector("[data-new-list-form]"),s=document.querySelector("[data-new-list-input]");o.addEventListener("submit",(t=>{t.preventDefault();const e=s.value,l=n.some((t=>t.name.toUpperCase()===e.toUpperCase()));if(null==e||""===e)return;if(s.value=null,l)return void alert("That list is already included");const o={name:e,id:Date.now().toString(),tasks:[]};a=o.id,n.push(o),u()})),f(),document.querySelector("[data-delete-list-button]").addEventListener("click",(t=>{n=n.filter((t=>t.id!==a)),a=null,u()}));const i=document.querySelector("[data-current-list-container]"),r=document.querySelector("[data-current-list-title]"),d=document.querySelector("[data-task-counter]"),c=document.querySelector("[data-tasks]");function u(){localStorage.setItem(t,JSON.stringify(n)),localStorage.setItem(e,a),f(),function(){if(null==a)i.style.display="none";else{let t=n.find((t=>t.id===a));i.style.display="",r.innerText=t.name,function(t){const e=t.tasks.filter((t=>!t.completed)).length,n=1===e?"task":"tasks";d.innerText=`${e} ${n} remaining`}(t),S(c),document.importNode(m.content,!0)}}()}const m=document.querySelector("[data-task-template]");function f(){S(l),n.forEach((t=>{const e=document.createElement("li");e.innerHTML=t.name,e.dataset.listId=t.id,t.id===a&&e.classList.add("active"),l.appendChild(e)}))}function S(t){for(;t.firstChild;)t.removeChild(t.firstChild)}})();